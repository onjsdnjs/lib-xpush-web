<html>
<head>
	<title></title>
</head>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.0.6.js"></script>
<!--script type="text/javascript" src="../libs/socketio/socket.io.js"></script-->
<script type="text/javascript" src="xpush.js"></script>
<script type="text/javascript">

var HOST = "http://www.notdol.com:8000";
var APPID = 'stalk-io';

// appId = gJlL7sFlO , appNm = notdol
/*

xpush1.on('messasge', function(channel, key, name){

});

xpush1.on('newChannel', function(channelName, channelObject){
	
});

xpush1.on('join', function(channelName, userId){

});

xpush1.on('exit', function(channelName, userId){

});
*/

var xpush1 = new XPush(HOST, APPID);


/*
xpush1.init('stalk.io',function(){
	console.log("===== stalk.io");
});

*/
/*
for(var i = 1 ; i <= 100; i++){
xpush1.signup('notdol'+(100+i),'win1234',function(){
	console.log('success');
});
}
*/
xpush1.login('notdol103','win1234',function(){
	/*
	xpush1.signup('notdol'+(100+i), 'win1234',function(){
		console.log('signin');
	});
	*/
	//console.log('login complete');
	/*
	xpush1.createChannel({users:['notdol']}, function(){
		console.log('createChannel');
	});
	*/

	/*
	xpush1.joinChannel(channel,function(users){
		console.log(users);
	});
	*/

	/*
	xpush1.exitChannel(channel,function(channels){
		console.log(channels);
	});
	*/


	/*
	xpush1.getChannels(function(channels){

	});
	*/


	/*
	xpush1.getUnreadMessage(function(data){
		console.log("== getUnreadMessage");
		console.log(data);
	});
	*/
	/*
	xpush1.on('message',function(data){
		console.log(data);
	});
	*/
	xpush1.on('channel-created', function(data){
		// data.chNm, data.ch
		console.log("==== channel-created : ",arguments);

		var channel = data.ch;
		channel.on('thisistest',function(data){
			console.log("== RM :",data);
			channel.send('thisisreturn',{c:'c'});
		})
	});
	/*
	var ch1 = xpush1.createChannel({users:['notdol']});
	ch1.on('thisistest', function(){
		
	});
	*/
});
var xpush2 = new XPush(HOST, APPID);

xpush2.login('notdol104','win1234',function(){
	var ch2 = xpush2.createChannel(['notdol103']);
	ch2.send('message',{a:'a',b:'b'});

	/*
	setInterval(function(){
		ch2.send('thisistest',{a:'a',b:'b'});
	
	},2000);

	xpush2.getUserList(function(data){
		console.log(data);
	});


	setInterval(function(){
		ch2.disconnect();
	},20000);

	ch2.on('thisisreturn',function(data){
		console.log("== RM : ", data);
	})
	*/
});

/*
var xpush1 = new XPush('http://channel-a.stalk.io:8000', 'ABCDE_APP', 'CH001');

xpush1.join('SESSION_UNIQUE_ID', function (data) {
  xpush1.send('event01', {from:'xpush1', comments:'Hello there.'});
});

xpush1.message('event01', function (data){
  console.log('event01 : ' + data.from + '-' + data.comments);
});

xpush1.message('event02', function (data){
  console.log('event02 : ' + data.from + '-' + data.comments);
});

xpush1.message('event03', function (data){
  console.log('event03 : ' + data.from + '-' + data.comments);
});

var xpush2 = new XPush('http://channel-a.stalk.io:8000', 'ABCDE_APP', 'CH002');
xpush2.join('SESSION_UNIQUE_ID_2', function (data) {
  xpush1.send('event02', {from:'xpush2', comments:'somthing from the other channel.'});
});
*/
</script>
<body>

</body>
</html>
